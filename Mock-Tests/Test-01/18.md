### 자바 Singleton 패턴 문제 해설
---

### ✅ 문제 18

다음은 자바 코드이다. 출력 결과를 쓰시오.

```java
class Soojebi {
    static private Soojebi instance = null;
    private int count = 0;

    static public Soojebi get(int x) {
        if (instance == null)
            instance = new Soojebi();
        instance.count += x;
        return instance;
    }

    public void count() { count++; }
    public int getCount() { return instance.count; }
}

public class Soojebi2 {
    public static void main(String[] args) {
        Soojebi s1 = Soojebi.get(2);
        s1.count();

        Soojebi s2 = Soojebi.get(3);
        s2.count();

        System.out.print(s1.getCount());
    }
}
```

### 🔍 핵심 개념: Singleton 패턴

- instance는 static 필드로 클래스당 하나만 존재
- get(int x)는 최초 호출 시 객체 생성, 이후 동일 인스턴스 반환
- count 필드는 인스턴스 변수이며 하나만 존재
- 두 객체 s1, s2는 사실상 같은 인스턴스를 가리킨다

### 🧠 실행 흐름

| 코드                      | 설명                         | count 값 |
| ----------------------- | -------------------------- | ------- |
| `Soojebi.get(2)`        | instance 생성 후 `count += 2` | 2       |
| `s1.count()`            | `count++`                  | 3       |
| `Soojebi.get(3)`        | 기존 인스턴스 사용, `count += 3`   | 6       |
| `s2.count()`            | `count++`                  | 7       |
| `System.out.print(...)` | `s1.getCount()` → 7        | 출력: 7   |


### ✅ 최종 출력 결과
```
7
```

### 📘 참고

Singleton 패턴이란?
클래스의 인스턴스를 오직 1개만 생성하도록 보장하는 디자인 패턴

```
class Singleton {
    private static Singleton instance = null;
    private Singleton() {}
    public static Singleton getInstance() {
        if (instance == null) instance = new Singleton();
        return instance;
    }
}
```

- 공유 자원 관리에 적합 (ex. 설정 객체, DB 연결 등)

---

### 📄 문제 요약 (주요 클래스 구조)
```
01 class Soojebi {
02     static private Soojebi instance = null;
03     private int count = 0;

04     static public Soojebi get(int x) {
05         if (instance == null)
06             instance = new Soojebi();
07         instance.count += x;
08         return instance;
09     }

10     public void count() { count++; }

11     public int getCount() { return instance.count; }
12 }

13 public class Soojebi2 {
14     public static void main(String[] args) {
15         Soojebi s1 = Soojebi.get(2);
16         s1.count();
17         Soojebi s2 = Soojebi.get(3);
18         s2.count();
19         System.out.print(s1.getCount());
20     }
21 }
```

### ✅ 실행 흐름 (행 번호 기준)

| 행 번호   | 코드                                 | 설명                                                                          |
| ------ | ---------------------------------- | --------------------------------------------------------------------------- |
| **14** | `public static void main(...)`     | 프로그램 시작점                                                                    |
| **15** | `Soojebi s1 = Soojebi.get(2);`     | `get(2)` 호출 → instance가 `null`이므로 `new Soojebi()` 생성됨 (`count = 0 + 2 = 2`) |
| **16** | `s1.count();`                      | `count++` 호출 → `count = 2 + 1 = 3`                                          |
| **17** | `Soojebi s2 = Soojebi.get(3);`     | 이미 instance가 존재하므로 기존 인스턴스를 그대로 반환 → `count += 3` → `count = 3 + 3 = 6`     |
| **18** | `s2.count();`                      | 동일 인스턴스에 대해 `count++` 호출 → `count = 6 + 1 = 7`                              |
| **19** | `System.out.print(s1.getCount());` | `getCount()`는 `instance.count` 반환 → 출력: **`7`**                             |


### 🧠 내부 변수 변화 요약

| 단계      | 설명                                         | `count` 값 |
| ------- | ------------------------------------------ | --------- |
| get(2)  | `instance = new Soojebi();` + `count += 2` | 2         |
| count() | `count++`                                  | 3         |
| get(3)  | `count += 3`                               | 6         |
| count() | `count++`                                  | 7         |

### ✅ 최종 출력 결과
```
7
```

### 🔁 핵심 개념 요약

- static Soojebi instance는 Singleton 패턴
- get(int x)는 매번 새로운 인스턴스를 만들지 않고 하나만 유지
- count는 그 인스턴스 내부 필드 → 여러 참조(s1, s2) 모두 같은 객체를 공유
